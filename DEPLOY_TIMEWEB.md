# Инструкция по запуску на Timeweb (Node.js)

Вы загрузили файлы, но теперь нужно "включить" сервер, который будет обрабатывать оплаты. 

Мы настроили всё так, чтобы `server.js` раздавал и ваш сайт, и обрабатывал оплаты. Это самый надежный способ.

## 1. Подготовка в Панели Timeweb

1.  Зайдите в панель управления Timeweb.
2.  Найдите раздел **"Сайты"** или **"Приложения"**.
3.  Создайте **Node.js приложение** (обычно это вкладка "Node.js" или установка через "Каталог CMS/ПО" -> Node.js).
4.  При создании укажите:
    *   **Домен**: `vladmarketolog.ru`
    *   **Точка входа (Start command/script)**: `payment-server/server.js`
    *   **Версия Node.js**: 18 или выше.

## 2. Установка зависимостей

В панели Timeweb (обычно во вкладке "Консоль" или "Терминал" для вашего сайта) нужно выполнить одну команду, чтобы скачать библиотеки:

1.  Откройте терминал в панели.
2.  Перейдите в папку сервера:
    ```bash
    cd payment-server
    ```
3.  Запустите установку:
    ```bash
    npm install
    ```

## 3. Переменные окружения (Важно!)

Файл `.env`, который мы меняли у вас на компьютере, может не загрузиться или не прочитаться. Надежнее задать настройки прямо в панели Timeweb.

В настройках вашего Node.js приложения найдите раздел **"Переменные окружения" (Environment Variables)** и добавьте туда:

*   `TOCHKA_TOKEN`: *ваш длинный токен*
*   `TOCHKA_CUSTOMER_CODE`: *ваш код клиента*
*   `REDIRECT_URL`: `https://vladmarketolog.ru/success.html`
*   `FAIL_REDIRECT_URL`: `https://vladmarketolog.ru/fail.html`
*   `TAX_SYSTEM_CODE`: `osn` (или ваш код)

## 4. Перезапуск

После настройки нажмите кнопку **"Перезапустить" (Restart)** в панели управления приложением.

## Как проверить?

1.  Откройте `https://vladmarketolog.ru`. Сайт должен открыться.
2.  Нажмите кнопку оплаты. Она должна перевести вас на банк.

> **Если сайт не открывается (502 Bad Gateway):**
> Проверьте логи в панели Timeweb. Обычно это значит, что сервер упал из-за ошибки (чаще всего — неверный путь к файлу или нет модуля). Убедитесь, что сделали `npm install` внутри папки `payment-server`.
